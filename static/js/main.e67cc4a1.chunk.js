(this["webpackJsonpfestival-poster-app"]=this["webpackJsonpfestival-poster-app"]||[]).push([[0],{38:function(t,e,n){t.exports=n.p+"static/media/desert.1f4ebc63.png"},39:function(t,e,n){t.exports=n.p+"static/media/punk.ae35ea3b.png"},40:function(t,e,n){t.exports=n.p+"static/media/metal.78fbcaff.png"},41:function(t,e,n){t.exports=n.p+"static/media/galaxy.5fd0b3a6.png"},47:function(t,e,n){t.exports=n(68)},48:function(t,e,n){},49:function(t,e,n){},54:function(t,e,n){},56:function(t,e,n){},65:function(t,e,n){},66:function(t,e,n){},68:function(t,e,n){"use strict";n.r(e);n(48),n(49);var a=n(0),r=n.n(a),i=n(25),s=n.n(i),o=(n(54),n(7)),c=n(81),u=n(82),l=n(79),h=n(80),f=n(4),p=n.n(f),d=(n(56),n(11)),v=n(9),m=n(10),g=n(8),b=n(13),y=n(46),w=function(t){var e=t instanceof k?t.type:null;return{message:t.message,name:t.name,stack:t.stack,type:e}},k=function(t){function e(t,n){var a;return Object(g.a)(this,e),(a=Object(d.a)(this,Object(v.a)(e).call(this,t)))._type=null,n&&(a._type=n),a}return Object(m.a)(e,t),Object(b.a)(e,[{key:"toJSON",value:function(){return w(this)}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}}]),e}(Object(y.a)(Error)),x=n(15),E=n(21),O=n(16),j=Object(E.b)({name:"system",initialState:{spotifyAccessToken:"",spotifyAccessTokenExpire:"",error:{isError:!1}},reducers:{accessTokenUpdated:function(t,e){return Object(O.a)(t,(function(t){t.spotifyAccessToken=e.payload.spotifyAccessToken,t.spotifyAccessTokenExpire=e.payload.spotifyAccessTokenExpire,""!==e.payload.spotifyAccessToken&&t.error.isError&&"NoSpotifyAccess"===t.error.error.type&&(t.error={isError:!1})}))},caughtGlobalError:function(t,e){return Object(O.a)(t,(function(t){t.error={isError:!0,error:w(e.payload)}}))},clearGlobalError:function(t){return Object(O.a)(t,(function(t){t.error={isError:!1}}))}}}),S=j.actions,A=S.accessTokenUpdated,T=S.caughtGlobalError,C=(S.clearGlobalError,j.reducer),R=.8*window.innerHeight,P={me:null,artists:[],topArtistsTimeRange:"medium_term",layoutType:"basic",themeType:"desert",width:.65*R,height:R},N=Object(E.b)({name:"poster",initialState:P,reducers:{changeThemeType:function(t,e){return Object(O.a)(t,(function(t){t.themeType=e.payload}))},changeLayoutType:function(t,e){return Object(O.a)(t,(function(t){t.layoutType=e.payload}))},updateArtistList:function(t,e){return Object(O.a)(t,(function(t){t.artists=e.payload}))},updateMeData:function(t,e){return Object(O.a)(t,(function(t){t.me=e.payload}))},topArtistsTimeRangeUpdated:function(t,e){return Object(O.a)(t,(function(t){t.topArtistsTimeRange=e.payload}))}}}),F=N.actions,I=F.changeThemeType,_=F.updateArtistList,H=F.topArtistsTimeRangeUpdated,M=F.changeLayoutType,B=F.updateMeData,L=N.reducer,D=n(12),U=Object(x.combineReducers)({poster:L,system:C}),z=function(t){return Object(D.c)(t)},W=function(t,e,n){var a=t.getContext("2d");if(!a)throw new Error("Could not get canvas context to create HiDPI canvas");var r=function(t){var e=window.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return Math.ceil(e/n)}(a);return t.width=e*r,t.height=n*r,t.style.width=e+"px",t.style.height=n+"px",a.setTransform(r,0,0,r,0,0),t},X=n(38),Y=n.n(X),G=n(39),K=n.n(G),J=n(40),Z=n.n(J),V=n(41),$=n.n(V),q=function(t){function e(){return Object(g.a)(this,e),Object(d.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(m.a)(e,t),e}(function(){function t(e,n,a,r){Object(g.a)(this,t),this.fontType=e,this.fontColor=n,this.fontSizeRatio=a,this.strokeInfo=void 0,this.strokeInfo=r||{strokeStyle:"black",widthRatio:.2,offsetX:0,offsetY:0}}return Object(b.a)(t,[{key:"setStrokeCtx",value:function(t,e,n){t.strokeStyle=e.strokeStyle,t.lineWidth=this.fontLineWidth(e.widthRatio,n)}},{key:"setTextCtx",value:function(t){t.fillStyle=this.fontColor}},{key:"draw",value:function(t,e,n,a,r,i){var s=this,o=Array.isArray(this.strokeInfo)?this.strokeInfo:[this.strokeInfo];r.save(),o.forEach((function(o){s.setStrokeCtx(r,o,i),r.strokeText(t,e+o.offsetX,n+o.offsetY,a)})),r.restore(),r.save(),this.setTextCtx(r),r.fillText(t,e,n,a),r.restore()}},{key:"fontHeight",value:function(t){return Math.floor(this.fontSizeRatio*t)}},{key:"fontString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.fontHeight(t);return"".concat(n*e,"px ").concat(this.fontType)}},{key:"fontLineWidth",value:function(t,e){return t*this.fontHeight(e)}},{key:"maxStrokeSize",value:function(t){return this.maxStrokeRatio*this.fontHeight(t)}},{key:"lineHeight",value:function(t){return this.fontHeight(t)+this.maxStrokeSize(t)}},{key:"maxStrokeRatio",get:function(){if(!this.strokeInfo)return 0;var t=Array.isArray(this.strokeInfo)?this.strokeInfo:[this.strokeInfo],e=0;return t.forEach((function(t){e=Math.max(e,t.widthRatio+Math.abs(t.offsetY))})),e}}]),t}()),Q=function t(){Object(g.a)(this,t),this.backgroundImage="",this.sideMarginRatio=0,this.festivalNameTopRatio=.05,this.artistTopRatio=.4,this.skewText=!1,this.nameFontPackage=void 0,this.artistFontPkg=void 0},tt=function(t){function e(){var t,n;Object(g.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(r)))).backgroundImage=Y.a,n.sideMarginRatio=.03,n.artistTopRatio=.3,n.nameFontPackage=new q("TexasTango","orange",.08),n.artistFontPkg=new q("WesternBangBang","orange",.032),n}return Object(m.a)(e,t),e}(Q),et=function(t){function e(){var t,n;Object(g.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(r)))).backgroundImage=K.a,n.nameFontPackage=new q("WesternBangBang","#37C3E1",.1),n.artistFontPkg=new q("WesternBangBang","#37C3E1",.033),n}return Object(m.a)(e,t),e}(Q),nt=function(t){function e(){var t,n;Object(g.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(r)))).backgroundImage=Z.a,n.sideMarginRatio=.035,n.nameFontPackage=new q("MadridGrunge","#7C7170",.1),n.artistFontPkg=new q("PunkrockerStamp","#7C7170",.032),n}return Object(m.a)(e,t),e}(Q),at=function(t){function e(){var t,n;Object(g.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(r)))).backgroundImage=$.a,n.festivalNameTopRatio=.05,n.artistFont="Monteral",n.artistColor="white",n.nameFontPackage=new q("Cocogoose","white",.1,{widthRatio:.1,offsetX:0,offsetY:0,strokeStyle:"black"}),n.artistFontPkg=new q("Monteral","white",.02),n.sideMarginRatio=.055,n}return Object(m.a)(e,t),e}(Q),rt=function(t){function e(){var t,n;Object(g.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(r)))).backgroundImage=$.a,n.festivalNameTopRatio=.05,n.sideMarginRatio=.055,n.nameFontPackage=new q("Cocogoose","white",.1),n.artistFontPkg=new q("Monteral","lime",.02,[{strokeStyle:"yellow",widthRatio:.4,offsetX:0,offsetY:0},{strokeStyle:"blue",widthRatio:.2,offsetX:0,offsetY:0}]),n.skewText=!0,n}return Object(m.a)(e,t),e}(Q),it=function(){function t(e){Object(g.a)(this,t),this._poster=e}return Object(b.a)(t,[{key:"fontPkg",value:function(t){switch(t){case"artist":return this.theme.artistFontPkg;case"name":return this.theme.nameFontPackage}}},{key:"cutTrailingChar",value:function(t){return t.slice(0,t.length-1)}},{key:"calculateTextWidth",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];var r=n.reduce((function(t,e){return t+e}),""),i=this.ctx.measureText(r);return Math.ceil(i.width+2*t.maxStrokeSize(this.posterHeight))}},{key:"setArtistFont",value:function(){this.ctx.font=this.fontPkg("artist").fontString(this.posterHeight)}},{key:"artistLines",value:function(){var t=[],e=this.poster,n=this.fontPkg("artist");this.setArtistFont();var a="",r=!0,i=!1,s=void 0;try{for(var o,c=this.poster.artistNames[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var u=o.value;this.calculateTextWidth(n,a,u)>this.maxPosterWidth?(t.push(this.cutTrailingChar(a)),a=u+e.artistSeperator):a=a+u+e.artistSeperator}}catch(l){i=!0,s=l}finally{try{r||null==c.return||c.return()}finally{if(i)throw s}}return""!==a&&t.push(this.cutTrailingChar(a)),t}},{key:"drawArtistBlock",value:function(t){var e=this,n=this.poster.canvasCtx,a=t||this.artistTop,r=this.artistLines();n.textBaseline="top",n.textAlign="center";var i=this.fontPkg("artist").lineHeight(this.posterHeight);console.log(i);var s=0;r.forEach((function(t,n){s=a+(n+1)*i,e.printCenter(t,s,e.fontPkg("artist"))}));var o=s+i;return{top:a,bottom:o,height:o-a}}},{key:"clearTransform",value:function(){this.ctx.setTransform(1,0,0,1,0,0)}},{key:"setSkew",value:function(){this.theme.skewText&&this.ctx.transform(1,.06,.06,1,-20,0)}},{key:"printCenter",value:function(t,e,n){var a=this.ctx;a.save(),a.textAlign="center",n.draw(t,this.midX,e,this.maxPosterWidth,a,this.posterHeight),a.restore()}},{key:"printLeft",value:function(t,e,n){var a=this.ctx;a.save(),a.textAlign="left",n.draw(t,this.sideMargin,e,this.maxPosterWidth,a,this.posterHeight),a.restore()}},{key:"printRight",value:function(t,e,n){this.ctx.save(),this.ctx.textAlign="right",n.draw(t,this.posterWidth-this.sideMargin,e,this.maxPosterWidth,this.ctx,this.posterHeight),this.ctx.restore()}},{key:"drawFestivalName",value:function(){var t=this.poster.canvasCtx,e=this.theme.nameFontPackage;t.save(),t.font=e.fontString(this.posterHeight),t.textBaseline="top",t.textAlign="center",t.strokeStyle="black",this.printCenter(this.poster.festivalName,this.festivalNameTop,e),t.restore()}},{key:"poster",set:function(t){this._poster=t},get:function(){if(!this._poster)throw new Error("Expected poster to be set before drawing");return this._poster}},{key:"ctx",get:function(){return this.poster.canvasCtx}},{key:"theme",get:function(){return this.poster.theme}},{key:"midX",get:function(){return Math.floor(this.posterWidth/2)}},{key:"midY",get:function(){return Math.floor(this.posterHeight/2)}},{key:"posterWidth",get:function(){return this.poster.w}},{key:"maxPosterWidth",get:function(){return this.posterWidth-2*this.sideMargin}},{key:"posterHeight",get:function(){return this.poster.h}},{key:"maxPosterHeight",get:function(){return this.posterHeight}},{key:"sideMargin",get:function(){return Math.ceil(this.theme.sideMarginRatio*this.posterWidth)}},{key:"festivalNameTop",get:function(){return Math.floor(this.theme.festivalNameTopRatio*this.posterHeight)}},{key:"artistTop",get:function(){return this.posterHeight*this.theme.artistTopRatio}}]),t}(),st=function(t){function e(){return Object(g.a)(this,e),Object(d.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(m.a)(e,t),e}(it),ot=function(t){function e(){var t,n;Object(g.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(d.a)(this,(t=Object(v.a)(e)).call.apply(t,[this].concat(r)))).textScaleDelta=.9,n.currentArtistFontSize=0,n}return Object(m.a)(e,t),Object(b.a)(e,[{key:"setArtistFont",value:function(){var t=this.theme.artistFontPkg;this.currentArtistFontSize=t.fontHeight(this.posterHeight),this.ctx.font=this.theme.artistFontPkg.fontString(this.posterHeight)}},{key:"scaleDownArtistFont",value:function(){var t=this.theme.artistFontPkg;this.currentArtistFontSize=this.currentArtistFontSize*this.textScaleDelta,this.ctx.font="".concat(this.currentArtistFontSize,"px ").concat(t.fontType),console.log(this.ctx.font)}},{key:"setHeadlinerFont",value:function(){this.ctx.font=this.theme.artistFontPkg.fontString(this.posterHeight,2)}},{key:"artistLines",value:function(){var t=[],e=this.poster,n=this.fontPkg("artist");this.setArtistFont();var a="",r=!0,i=!1,s=void 0;try{for(var o,c=this.artistNames[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var u=o.value;this.calculateTextWidth(n,a,u)>this.maxPosterWidth?(t.push(this.cutTrailingChar(a)),a=u+e.artistSeperator,this.scaleDownArtistFont()):a=a+u+e.artistSeperator}}catch(l){i=!0,s=l}finally{try{r||null==c.return||c.return()}finally{if(i)throw s}}return""!==a&&t.push(this.cutTrailingChar(a)),t}},{key:"drawArtistBlock",value:function(t){var e=this,n=this.ctx;n.save(),n.textBaseline="bottom";var a=this.theme.artistFontPkg,r=a.lineHeight(this.posterHeight),i=t||this.artistTop,s=this.artistLines(),o=i;return this.setHeadlinerFont(),this.printLeft(this.headliners[0],o,a),this.setArtistFont(),this.printRight("FRIDAY",o,this.theme.artistFontPkg),s.forEach((function(t,n){o+=r,e.printLeft(t,o,a),e.scaleDownArtistFont()})),n.restore(),{bottom:0,top:i,height:0}}},{key:"headliners",get:function(){return this.poster.artistNames.slice(0,3)}},{key:"artistNames",get:function(){var t=this.headliners;return this.poster.artistNames.filter((function(e){return!t.includes(e)}))}}]),e}(it),ct=function(t){function e(){return Object(g.a)(this,e),Object(d.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(b.a)(e,[{key:"dayFont",value:function(){this.ctx.font=this.theme.artistFontPkg.fontString(this.posterHeight,2)}},{key:"artistFont",value:function(){this.ctx.font=this.theme.artistFontPkg.fontString(this.posterHeight)}},{key:"drawArtistBlock",value:function(t){var e=this,n=this.artistLines(),a=Math.ceil(n.length/3),r=n.slice(0,a),i=n.slice(a,2*a),s=n.slice(2*a),o=this.ctx,c=this.theme.artistFontPkg;o.save(),o.textBaseline="bottom";var u=c.lineHeight(this.posterHeight),l=t||this.artistTop,h=l-u,f=l;return this.dayFont(),this.printLeft("FRIDAY",f,c),this.artistFont(),r.forEach((function(t,n){f+=u,e.printLeft(t,f,c)})),f+=3*u,this.dayFont(),this.printRight("SATURDAY",f,c),this.artistFont(),i.forEach((function(t,n){f+=u,e.printRight(t,f,c)})),f+=3*u,o.textAlign="left",this.dayFont(),this.printLeft("SUNDAY",f,c),this.artistFont(),s.forEach((function(t){f+=u,e.printLeft(t,f,c)})),o.restore(),{top:h,bottom:f,height:f-h}}}]),e}(it),ut=n(30),lt=n.n(ut),ht=n(22),ft="https://api.spotify.com",pt="v1",dt=function(){function t(e){Object(g.a)(this,t),this.apiKey=e}return Object(b.a)(t,[{key:"getPlaylistArtists",value:function(t){var e;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.awrap(this.getPlaylistTracks(t));case 2:if(!((e=n.sent)instanceof k)){n.next=5;break}return n.abrupt("return",e);case 5:return n.abrupt("return",Et(e));case 6:case"end":return n.stop()}}),null,this)}},{key:"noAuthAPICall",value:function(t){var e,n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,p.a.awrap(fetch(t));case 3:return e=a.sent,a.next=6,p.a.awrap(bt(e,t));case 6:return n=a.sent,a.abrupt("return",n);case 10:return a.prev=10,a.t0=a.catch(0),a.abrupt("return",a.t0);case 13:case"end":return a.stop()}}),null,null,[[0,10]])}}]),t}(),vt=function(t){function e(){return Object(g.a)(this,e),Object(d.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(b.a)(e,[{key:"getPlaylists",value:function(){return t=this.apiKey,p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kt(t,["me","playlists"]));case 1:case"end":return e.stop()}}));var t}},{key:"getPlaylistTracks",value:function(t){return function(t,e){var n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(kt(t,["playlists",e,"tracks"]));case 2:if(!((n=a.sent)instanceof k)){a.next=5;break}return a.abrupt("return",n);case 5:return a.abrupt("return",n.map((function(t){return t.track})));case 6:case"end":return a.stop()}}))}(this.apiKey,t)}},{key:"me",value:function(){return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",xt(this.apiKey));case 1:case"end":return t.stop()}}),null,this)}},{key:"topArtists",value:function(){var t,e,n,a,r,i,s,o,c=arguments;return p.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},e=t.limit,n=void 0===e?"50":e,a=t.offset,r=void 0===a?"0":a,i=t.time_range,s=void 0===i?"medium_term":i,u.next=3,p.a.awrap(kt(this.apiKey,["me","top","artists"],{limit:n,offset:r,time_range:s}));case 3:return o=u.sent,u.abrupt("return",o);case 5:case"end":return u.stop()}}),null,this)}}]),e}(dt),mt=function(t){function e(){return Object(g.a)(this,e),Object(d.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(b.a)(e,[{key:"getPlaylists",value:function(){var t;return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t=gt("users",this.apiKey,"playlists"),e.next=3,p.a.awrap(this.noAuthAPICall(t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),null,this)}},{key:"getPlaylistTracks",value:function(t){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=gt("playlists",this.apiKey,"tracks"),t.next=3,p.a.awrap(this.noAuthAPICall(e));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),null,this)}},{key:"me",value:function(){var t;return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t=gt("users",this.apiKey),e.next=3,p.a.awrap(this.noAuthAPICall(t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),null,this)}}]),e}(dt);function gt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=[pt].concat(e).join("/");return new URL(a,ft).href}function bt(t,e){var n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.ok){a.next=4;break}if(401!==t.status){a.next=3;break}return a.abrupt("return",new k("Fetch for URL ".concat(e," returned not ok status.  Status: ").concat(t.status),"NoSpotifyAccess"));case 3:return a.abrupt("return",new k("Fetch for URL ".concat(e," returned not ok status.  Status: ").concat(t.status),"NoSpotifyAccess"));case 4:if(200===t.status){a.next=6;break}return a.abrupt("return",new k("Fetch for URL ".concat(e," returned a status of ").concat(t.status),"NoSpotifyAccess"));case 6:return a.prev=6,a.next=9,p.a.awrap(t.json());case 9:return n=a.sent,a.abrupt("return",n);case 13:return a.prev=13,a.t0=a.catch(6),a.abrupt("return",a.t0);case 16:case"end":return a.stop()}}),null,null,[[6,13]])}function yt(t,e){var n,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n={Authorization:"Bearer ".concat(t)},r.prev=1,r.next=4,p.a.awrap(fetch(e,{headers:n}));case 4:return a=r.sent,r.abrupt("return",bt(a,e));case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",r.t0);case 11:case"end":return r.stop()}}),null,null,[[1,8]])}function wt(t){if(!t)return"";var e=new URLSearchParams;for(var n in t)e.append(n,t[n]);return e.toString()}function kt(t,e,n){var a,r,i;return p.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=wt(n),r=gt.apply(void 0,Object(ht.a)(e).concat(["?".concat(a)])),s.next=4,p.a.awrap(yt(t,r));case 4:if(!((i=s.sent)instanceof k)){s.next=7;break}return s.abrupt("return",i);case 7:if(i.hasOwnProperty("items")){s.next=9;break}throw new k("Returned paging object does not contain items field.  Url: ".concat(r));case 9:return s.abrupt("return",i.items);case 10:case"end":return s.stop()}}))}function xt(t){var e,n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=gt("me"),a.next=3,p.a.awrap(yt(t,e));case 3:return n=a.sent,a.abrupt("return",n);case 5:case"end":return a.stop()}}))}function Et(t){var e=new Set;return t.forEach((function(t){e.add(t.artists[0].name)})),Object(ht.a)(e)}function Ot(){var t=function(){var t=Object(a.useState)([0,0]),e=Object(o.a)(t,2),n=e[0],r=e[1];return Object(a.useLayoutEffect)((function(){function t(){r([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}}),[]),n}(),e=Object(o.a)(t,2),n=e[0],r=e[1],i=Object(a.useState)(void 0),s=Object(o.a)(i,2),c=s[0],u=s[1],l=Object(a.useRef)(null),h=l.current;return Object(a.useEffect)((function(){var t=null===h||void 0===h?void 0:h.getBoundingClientRect();u(t)}),[h,n,r]),[c,l]}var jt=function(){return Math.floor(Date.now()/1e3)},St=function(){var t=z((function(t){return t.system.spotifyAccessToken})),e=z((function(t){return t.system.spotifyAccessTokenExpire}));if(""===t&&""===e)return{status:"NONE"};if(""===t||""===e)throw new Error("Spotify access token/expire in invalid state");return parseInt(e,10)<jt()?{status:"EXPIRED"}:{status:"VALID",accessToken:t}},At=n(24),Tt=n(28),Ct=n(70),Rt=n(71),Pt=n(72),Nt=n(84),Ft=n(73),It=n(69),_t=function(t){var e=t.children,n=Object(Tt.a)(t,["children"]),a=n.color?n.color:"primary",i=n.size?n.size:"sm";return r.a.createElement(It.a,Object.assign({color:a,size:i,onClick:function(t){var e;t.stopPropagation(),null===(e=n.onClick)||void 0===e||e.call(n,t)}},n),e)};n(65);function Ht(t,e,n){t.preventDefault(),n(e)}var Mt=function(t){var e=t.rowNumber,n=t.disableActions,i=t.item,s=t.isEditing,c=t.setIsEditing,u=t.renderData,l=Object(Tt.a)(t,["rowNumber","disableActions","item","isEditing","setIsEditing","renderData"]),h=Object(a.useState)(i.data),f=Object(o.a)(h,2),p=f[0],d=f[1],v=l.handleRemove,m=l.handleEdit,g=l.handleSelectionChange,b=l.canEditGlobal&&i.canEdit&&m,y=!(!l.canRemove||!v),w=!(!l.canSelect||void 0===g),k=!!i.isSelected;return s?r.a.createElement(Ct.a,null,r.a.createElement(Rt.a,null,r.a.createElement(Pt.a,{value:p,style:{display:"inline"},onChange:function(t){d(t.target.value)}}),r.a.createElement(Nt.a,{addonType:"append"},r.a.createElement(_t,{onClick:function(t){if(!m)throw Error("Expected handleEdit to exist by this point");Ht(t,Ut(i,{data:p}),m),d(""),c(!1)}},"Save")),r.a.createElement(Nt.a,{addonType:"append"},r.a.createElement(_t,{color:"danger",onClick:function(t){d(""),c(!1)}},"X")))):function(){var t=w&&k;return r.a.createElement(Ct.a,{key:i.id,action:w,active:t,className:"noselect d-flex justify-content-between align-items-center py-1",onClick:function(t){var e;return null===(e=l.handleSelectionChange)||void 0===e?void 0:e.call(l,i)}},"number"===typeof e&&"".concat(e+1,". "),u(i.data),r.a.createElement(Ft.a,null,b&&m&&r.a.createElement(_t,{disabled:n,onClick:function(t){return c(!0)}},"Edit"),y&&v&&r.a.createElement(_t,{disabled:n,onClick:function(t){Ht(t,i,v)}},"Remove")),t?"\u2705":"\u274c")}()},Bt=n(74),Lt=-1,Dt=function(){return++Lt};function Ut(t,e){return Object(At.a)({id:Dt()},t,{},e)}function zt(t,e,n){return{handleRemove:function(n){var a;t((function(t){return t.filter((function(t){return t.id!==n.id}))})),null===e||void 0===e||null===(a=e.handleRemove)||void 0===a||a.call(e,n)},handleAddRow:function(a){var r,i,s=(null===n||void 0===n?void 0:null===(r=n.addRow)||void 0===r?void 0:r.call(n,a))||a;t((function(t){return[].concat(Object(ht.a)(t),[s])})),null===e||void 0===e||null===(i=e.handleAddRow)||void 0===i||i.call(e,s)},handleEdit:function(n){var a;t((function(t){var e=Object(ht.a)(t),a=e.find((function(t){return t.id===n.id}));if(!a)throw new Error("Could not find edited item: ".concat(JSON.stringify(n)));return a.data=n.data,e})),null===e||void 0===e||null===(a=e.handleEdit)||void 0===a||a.call(e,n)},handleSelectionChange:function(n){t((function(t){return Object(O.a)(t,(function(t){var a,r=t.findIndex((function(t){return t.id===n.id}));t[r].isSelected=!n.isSelected,null===e||void 0===e||null===(a=e.handleSelectionChange)||void 0===a||a.call(e,t[r])}))}))},handleSelectAll:function(){t((function(t){var e=t.map((function(t){return Object(At.a)({},t,{isSelected:!0})})),a=null===n||void 0===n?void 0:n.selectAll;return a&&(e=a(e)),e}))},handleClear:function(){t((function(t){var e=t.map((function(t){return Object(At.a)({},t,{isSelected:!1})})),a=null===n||void 0===n?void 0:n.clear;return a&&(e=a(e)),e}))}}}var Wt,Xt=function(t){var e=Object(a.useState)(!1),n=Object(o.a)(e,2),i=n[0],s=n[1],c=Object(a.useState)(""),u=Object(o.a)(c,2),l=u[0],h=u[1],f=Object(a.useState)(!1),p=Object(o.a)(f,2),d=p[0],v=p[1],m=t.items,g=t.canSelect&&t.handleSelectAll,b=t.canSelect&&t.handleClear,y=function(){var e=t.handleAddRow,n=t.canAddRow;return e&&n?i?r.a.createElement("div",null,r.a.createElement(Ct.a,null,r.a.createElement(Rt.a,null,r.a.createElement(Pt.a,{value:l,onChange:function(t){return h(t.target.value)}}),r.a.createElement(Ft.a,null,r.a.createElement(_t,{onClick:function(){var t=Ut({data:l,userAdded:!0,isSelected:!1},{});s(!1),e(t),h("")}},"Save"),r.a.createElement(_t,{color:"danger",onClick:function(){s(!1),h("")}},"X"))))):r.a.createElement(Ct.a,null,r.a.createElement(_t,{block:!0,disabled:d,onClick:function(){return s(!0)}},"Add Row")):null},w=function(){return r.a.createElement("div",{className:"list__header",style:{display:"flex",justifyContent:"space-between"}},t.name?r.a.createElement("h3",null,t.name):null,function(){var e=null,n=null;return g&&(e=r.a.createElement(_t,{color:"success",onClick:function(e){var n;null===(n=t.handleSelectAll)||void 0===n||n.call(t)}},"Select All")),b&&(n=r.a.createElement(_t,{color:"warning",onClick:function(e){var n;null===(n=t.handleClear)||void 0===n||n.call(t)}},"Unselect All")),r.a.createElement("div",{className:"list__actions"},r.a.createElement(Ft.a,null,e,n))}())};return r.a.createElement("div",{className:"list"},function(){var e=m.map((function(e,n){var a=t.rowNumbers?n:void 0;return r.a.createElement(Mt,Object.assign({key:e.id,item:e,setIsEditing:v,isEditing:d,disableActions:i,rowNumber:a},t))}));return r.a.createElement("div",{className:"list"},w(),r.a.createElement(Bt.a,null,e,y()))}())},Yt=function(){var t=Object(D.b)();return Object(a.useCallback)((function(e,n){n&&(e.type=n),t(T(e))}),[t])},Gt=function(){return Object(a.useCallback)((function(t){console.log(t)}),[])},Kt=function(){var t=St(),e=Yt(),n="";"NONE"===t.status||"EXPIRED"===t.status?e(new k("Spotify Access token status not valid.  status: ".concat(t.status)),"NoSpotifyAccess"):n=t.accessToken;return Object(a.useMemo)((function(){return""===n?null:function(t){var e=t.authToken,n=t.userId;return e&&""!==e?new vt(e):n&&""!==n?new mt(n):null}({authToken:n})}),[n])},Jt=0,Zt="My Festival",Vt=function(t){function e(){return Object(g.a)(this,e),Object(d.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(m.a)(e,t),e}(function(){function t(e,n,a){Object(g.a)(this,t),this.ps=e,this.theme=n,this.layout=a,this.canvas=void 0,this.canvasCtx=void 0,this._w=0,this._h=0,this.img=void 0,this._drawBackground=!0,this.festivalNameText=Zt,this.festivalNameCase="upper",this.artistCase="upper"}return Object(b.a)(t,[{key:"setPosterSize",value:function(t,e){this._w=Math.floor(t),this._h=Math.floor(e)}},{key:"load",value:function(t,e){var n,a,r;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new lt.a(this.artistFontPkg.fontType),a=new lt.a(this.festivalNameFontPkg.fontType),r=[n.load(),a.load()],e&&r.push(this.loadImage()),t.next=6,p.a.awrap(this.loadImage());case 6:return t.prev=6,t.next=9,p.a.awrap(Promise.all(r));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),console.error(t.t0);case 14:case"end":return t.stop()}}),null,this,[[6,11]])}},{key:"draw",value:function(e){var n,a=arguments;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],W(e,this.w,this.h),r.next=4,p.a.awrap(this.load(e,n));case 4:return this._drawBackground=n,this.canvas=e,this.canvasCtx=t.getContext(this.canvas),this.layout.poster=this,r.next=10,p.a.awrap(this._draw());case 10:case"end":return r.stop()}}),null,this)}},{key:"_draw",value:function(){var t,e,n,a,r,i,s,o=arguments;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},e=t.drawBackground,n=void 0===e||e,a=t.drawArtistBlock,r=void 0===a||a,i=t.drawFestivalName,s=void 0===i||i,this.clear(),!n||!this._drawBackground){c.next=5;break}return c.next=5,p.a.awrap(this.drawBackground(this.canvas));case 5:if(s&&this.layout.drawFestivalName(),!r){c.next=9;break}return c.next=9,p.a.awrap(this.drawArtistBlock());case 9:case"end":return c.stop()}}),null,this)}},{key:"drawArtistBlock",value:function(){var t,e,n,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=this.layout.drawArtistBlock(),e=t.bottom,n=this.layout.maxPosterHeight,!(e<=n)){r.next=4;break}return r.abrupt("return");case 4:return a=this.layout.artistTop-(e-n),r.next=7,p.a.awrap(this._draw({drawArtistBlock:!1}));case 7:this.layout.drawArtistBlock(a);case 8:case"end":return r.stop()}}),null,this)}},{key:"clear",value:function(){this.canvasCtx.clearRect(0,0,this.w,this.h)}},{key:"drawMultiCanvas",value:function(t,e){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(W(t,this.w,this.h),!e){n.next=4;break}return n.next=4,p.a.awrap(this.drawBackground(e));case 4:return n.next=6,p.a.awrap(this.draw(t,!1));case 6:return n.abrupt("return");case 7:case"end":return n.stop()}}),null,this)}},{key:"loadImage",value:function(t,e){var n=this;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return this.img=new Image(t,e),a.abrupt("return",new Promise((function(t){n.img.onload=function(){t()},n.img.src=n.theme.backgroundImage})));case 2:case"end":return a.stop()}}),null,this)}},{key:"drawBackground",value:function(e){var n,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return W(e,this.w,this.h),r.next=3,p.a.awrap(this.loadImage());case 3:n=this.img.naturalWidth,a=this.img.naturalHeight,t.getContext(e).drawImage(this.img,0,0,n,a,0,0,this.w,this.h);case 7:case"end":return r.stop()}}),null,this)}},{key:"artistFontPkg",get:function(){return this.theme.artistFontPkg}},{key:"festivalNameFontPkg",get:function(){return this.theme.nameFontPackage}},{key:"w",get:function(){return this._w}},{key:"h",get:function(){return this._h}},{key:"artistSeperator",get:function(){return String.fromCharCode(8226)}},{key:"festivalName",get:function(){return"upper"===this.festivalNameCase?this.festivalNameText.toUpperCase():this.festivalNameText}},{key:"display_name",set:function(t){t?this.festivalNameText="".concat(t," FEST"):this.festivalNameText=Zt}},{key:"artistNames",get:function(){var t=this;return this.ps.artists.filter((function(t){return t.isSelected})).map((function(e){var n=e.data.name;return"upper"===t.artistCase&&(n=n.toUpperCase()),n}))}}],[{key:"getContext",value:function(t){var e=t.getContext("2d");if(!e)throw new k("Expected canvas context");return e}}]),t}()),$t=function(){var t=function(){var t=z((function(t){return t.poster.me})),e=Kt(),n=Object(D.b)(),r=Gt(),i=Yt();return Object(a.useEffect)((function(){e&&function(){var t;p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}throw new Error("Expected api");case 2:return r("Using spotify api to fetch me data"),a.prev=3,a.next=6,p.a.awrap(e.me());case 6:t=a.sent,a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(3),i(a.t0),a.abrupt("return");case 13:if(t){a.next=15;break}throw new Error("Expected me data");case 15:if(!(t instanceof Error)){a.next=17;break}throw new Error("Expected error to be caught");case 17:n(B(t));case 18:case"end":return a.stop()}}),null,null,[[3,9]])}()}),[e,n,i,r]),t}(),e=function(){var t=z((function(t){return t.poster.themeType}));return Object(a.useMemo)((function(){switch(t){case"punk":return new et;case"rock":return new nt;case"desert":return new tt;case"galaxy":return new at;case"test":return new rt;default:throw new k("Invalid theme ".concat(t))}}),[t])}(),n=function(){var t=z((function(t){return t.poster.layoutType}));return Object(a.useMemo)((function(){switch(t){case"basic":return new st;case"weekend":return new ct;case"coachella":return new ot;default:throw new k("Invalid theme ".concat(t))}}),[t])}(),r=z((function(t){return t.poster}));return Object(a.useMemo)((function(){var a=new Vt(r,e,n);return a.display_name=null===t||void 0===t?void 0:t.display_name,a}),[n,t,r,e])},qt=n(75),Qt=[4,5],te=function(t){return t*(Qt[1]/Qt[0])},ee=function(t){var e=t.parentDomRect,n=$t(),i=Object(a.useState)(""),s=Object(o.a)(i,2),c=s[0],u=s[1],l=Object(a.useState)(0),h=Object(o.a)(l,2),f=h[0],d=h[1],v=Object(a.useState)(0),m=Object(o.a)(v,2),g=m[0],b=m[1],y=Object(a.useState)(!1),w=Object(o.a)(y,2),k=w[0],x=w[1],E=Object(a.useRef)(null),O=Object(a.useRef)(null),j=function(t){if(!t)return{w:0,h:0};for(var e,n=t.width,a=te(n);a>=(e=t.top,document.documentElement.clientHeight-e);)a=te(n-=5);return{w:n=Math.floor(n),h:a=Math.floor(a)}}(e),S=j.w,A=j.h,T=n.theme.backgroundImage;n.setPosterSize(S,A);var C=Object(a.useCallback)((function(){return T!==c||f!==S||g!==A}),[T,A,S,c,g,f]),R=Object(a.useCallback)((function(){return 0!==S&&0!==A}),[A,S]);Object(a.useEffect)((function(){R()&&function(){var t,e,a;p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=E.current){r.next=3;break}throw new Error("Unable to retreive poster canvas element");case 3:if(e=O.current){r.next=6;break}throw new Error("Unable to retreive poster background canvas element");case 6:return a=C(),console.log(a),a&&x(!0),r.next=11,p.a.awrap(n.drawMultiCanvas(t,a?e:void 0));case 11:x(!1),u(n.theme.backgroundImage),d(n.w),b(n.h);case 15:case"end":return r.stop()}}))}()}),[R,C,n]);return r.a.createElement(r.a.Fragment,null,k&&r.a.createElement(qt.a,{style:{width:"3rem",height:"3rem",zIndex:99}}),r.a.createElement("canvas",{id:"poster-bg",ref:O,style:{position:"absolute"}},"Poster BackGround"),r.a.createElement("canvas",{ref:E,id:"poster-canvas",style:{position:"absolute"}},"Festival Poster Viewer"))},ne=n(78),ae=n(76),re=n(77),ie=function(t,e,n){var r=Object(a.useState)(e),i=Object(o.a)(r,2),s=i[0],c=i[1];return[s,{options:t,selected:s,handleChange:function(t){c(t),n&&n(t)}}]},se=function(t){var e=t.options,n=t.handleChange,a=t.selected,i=t.labelText,s=e.map((function(t){return r.a.createElement("option",{key:t.value,value:t.value},t.text)}));return r.a.createElement(ae.a,null,i&&r.a.createElement(re.a,null,i),r.a.createElement(Pt.a,{type:"select",value:a,onChange:function(t){n&&n(t.target.value)}},s))},oe=[{text:"Desert",value:"desert"},{text:"Punk",value:"punk"},{text:"Rock",value:"rock"},{text:"Galaxy",value:"galaxy"},{text:"TEST",value:"test"}],ce=[{text:"Basic",value:"basic"},{text:"Weekend",value:"weekend"},{text:"Coachella",value:"coachella"}],ue=function(){var t=Object(D.b)(),e=z((function(t){return t.poster.themeType})),n=z((function(t){return t.poster.layoutType})),i=ie(oe,e,(function(e){t(I(e))})),s=Object(o.a)(i,2)[1],c=ie(ce,n,(function(e){t(M(e))})),u=Object(o.a)(c,2)[1],f=function(){var t=$t();return Object(a.useCallback)((function(){var e,n,a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=document.createElement("canvas"),t.setPosterSize(1600,2e3),r.next=4,p.a.awrap(t.draw(e));case 4:n=e.toDataURL("png",1),null===(a=window.open("_blank"))||void 0===a||a.document.write("<img src=".concat(n,"></img>"));case 7:case"end":return r.stop()}}))}),[t])}();return r.a.createElement("div",{className:"options mb-2"},r.a.createElement(ne.a,null,r.a.createElement(l.a,{form:!0},r.a.createElement(h.a,{md:6,xs:6},r.a.createElement(se,Object.assign({labelText:"Theme"},s))),r.a.createElement(h.a,{md:6,xs:6},r.a.createElement(se,Object.assign({labelText:"Text Layout"},u))),r.a.createElement(h.a,{md:6,xs:6}))),r.a.createElement(_t,{color:"warning",onClick:function(){return f()}},"Create Image"))},le=(n(66),[{text:"Last 6 Months",value:"medium_term"},{text:"All Time",value:"long_term"},{text:"1 Month",value:"short_term"}]),he=function(){var t=function(){var t=z((function(t){return t.poster.topArtistsTimeRange})),e=z((function(t){return t.poster.artists})),n=Kt(),r=Object(D.b)(),i=Gt(),s=Yt();return Object(a.useEffect)((function(){n&&function(){var e,a;p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(null===n||void 0===n?void 0:n.topArtists){o.next=2;break}throw new Error("Expected topArtists method to exist on spotify api object");case 2:if(!(++Jt>5)){o.next=5;break}throw new Error("Max Count Reached");case 5:return i("Using api to retreive top Artists for range "+t),o.prev=6,o.next=9,p.a.awrap(n.topArtists({time_range:t}));case 9:e=o.sent,o.next=15;break;case 12:o.prev=12,o.t0=o.catch(6),s(o.t0,"NoSpotifyAccess");case 15:if(o.prev=15,e){o.next=18;break}throw new k("Expected top artists data");case 18:if(!(e instanceof Error)){o.next=21;break}return s(e),o.abrupt("return");case 21:return a=e.map((function(t){return Ut({isSelected:!0,data:t,canEdit:!1,userAdded:!1})})),r(_(a)),o.finish(15);case 24:case"end":return o.stop()}}),null,null,[[6,12,15,24]])}()}),[r,i,s,n,t]),{topArtists:e,setTopArtistsTimeRange:function(t){r(H(t))}}}().setTopArtistsTimeRange,e=z((function(t){return t.poster.topArtistsTimeRange})),n=ie(le,e,(function(e){return t(e)})),i=Object(o.a)(n,2)[1],s=function(t,e,n){var r=Object(D.c)(t),i=Object(D.b)(),s=Object(a.useCallback)((function(t){i(e(t))}),[i,e]),o=Object(At.a)({},zt((function(t){var n=t(r);i(e(n))})),{renderData:n});return{items:r,setItems:s,listProps:o}}((function(t){return t.poster.artists}),_,(function(t){var e=t.images[t.images.length-1].url;return r.a.createElement("span",null,r.a.createElement("img",{className:"",alt:t.name+" photo",src:e,style:{height:"50px",width:"50px",marginRight:"5px"}}),t.name)})),c=s.items,u=s.listProps;return r.a.createElement("div",null,r.a.createElement("h3",{style:{display:"inline-block"}},"Top Artists"),r.a.createElement(se,i),r.a.createElement(Xt,Object.assign({items:c},u,{canSelect:!0})))},fe=window.location.href,pe="https://accounts.spotify.com/authorize",de="access_token",ve="token_type",me="expires_in",ge={client_id:"f775b626d4784dfba4491742d5453d55",response_type:"token",redirect_uri:fe,scope:"user-top-read"};function be(){for(var t=[],e=0,n=Object.entries(ge);e<n.length;e++){var a=n[e],r=Object(o.a)(a,2),i=r[0],s=r[1];t.push("".concat(i,"=").concat(s))}var c=t.join("&");return"".concat(pe,"?").concat(c)}function ye(){if(Wt)return{status:"AUTHORIZED",data:Wt};var t={},e=window.location.href.split("#");if(2!==e.length)return{status:"NOT_AUTHORIZED"};var n=e[1].split("&"),a=!0,r=!1,i=void 0;try{for(var s,c=n[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=s.value.split("="),l=Object(o.a)(u,2),h=l[0],f=l[1];t[h]=f}}catch(d){r=!0,i=d}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}if(t.hasOwnProperty("error"))return{status:"ACCESS_DENIED"};var p="";return t.hasOwnProperty(de)||(p="Hash fragment does not contain field: ".concat(de)),t.hasOwnProperty(me)||(p="Hash fragment does not contain field: ".concat(me)),t.hasOwnProperty(ve)||(p="Hash fragment does not contain field: ".concat(ve)),""!==p?{status:"ERROR",error:p}:{status:"AUTHORIZED",data:t}}var we=function(){return r.a.createElement("div",{className:"h-100 d-flex justify-content-center align-items-center"},r.a.createElement("a",{className:"btn btn-success",role:"button",href:be()},"Authorize Spotify"))},ke=function(t){var e=t.active,n=t.toggle,a=e?300:0,i="VALID"!==St().status;return r.a.createElement("div",{className:"sidenav ",style:{width:a}},r.a.createElement("a",{href:"#",className:"closebtn",onClick:n},"\xd7"),i&&r.a.createElement(we,null),!i&&r.a.createElement(he,null))},xe=function(){var t=Object(a.useState)(!1),e=Object(o.a)(t,2),n=e[0],i=e[1],s=function(){return i(!n)},f=Ot(),p=Object(o.a)(f,2),d=p[0],v=p[1];return r.a.createElement("div",{className:"home h-100"},r.a.createElement(c.a,{className:"navbar navbar-expand-sm navbar-light bg-light py-0",style:{marginBottom:"10px"}},r.a.createElement(_t,{className:"mr-2",onClick:function(){return s()}},"Artists"),r.a.createElement("div",{className:"navbar-brand"},"Poster App"),null),r.a.createElement(ke,{active:n,toggle:s}),r.a.createElement(ue,null),r.a.createElement("div",{ref:v,className:"h-100"},r.a.createElement(u.a,{className:"h-100"},r.a.createElement(l.a,{className:"h-100"},r.a.createElement(h.a,{className:"d-flex justify-content-center h-100"},r.a.createElement(ee,{parentDomRect:d}))))))},Ee=n(83),Oe=function(){return r.a.createElement(Ee.b,{to:"/"})},je=function(){var t=Object(D.b)(),e=ye();if("AUTHORIZED"!==e.status)return console.log("Non Authorized status: ".concat(e.status)),console.log(e.error),Oe();if(!e.data)throw new Error("Received authorized status without data");var n=e.data,a=n.access_token,r=n.expires_in;return t(A({spotifyAccessToken:a,spotifyAccessTokenExpire:r})),Oe()},Se=function(){var t=Object(D.b)(),e=ye();if("AUTHORIZED"!==e.status);else{if(!e.data)throw new Error("Received authorized status without data");var n=e.data,a=n.access_token,i=n.expires_in,s=parseInt(i,10);if(isNaN(s))throw new Error("Spotify did not return a valid number ".concat(i));var o=jt()+s;window.location.hash="",t(A({spotifyAccessToken:a,spotifyAccessTokenExpire:o.toString()}))}return r.a.createElement("div",{className:"App"},r.a.createElement(Ee.d,null,r.a.createElement(Ee.c,{exact:!0,path:"/authenticate"},r.a.createElement(je,null)),r.a.createElement(Ee.c,{exact:!0,path:"/"},r.a.createElement(xe,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ae="version",Te=window.localStorage.getItem(Ae);Te?parseInt(Te,10)<4&&(window.localStorage.clear(),window.localStorage.setItem(Ae,4..toString())):(window.localStorage.clear(),window.localStorage.setItem(Ae,4..toString()));var Ce=window.localStorage.getItem("__REDUX_LOCAL_STORAGE_KEY"),Re=Ce?JSON.parse(Ce):void 0,Pe=[function(t){return function(e){return function(n){var a=e(n),r=t.getState(),i=JSON.stringify(r);return window.localStorage.setItem("__REDUX_LOCAL_STORAGE_KEY",i),a}}}],Ne=Object(E.a)({reducer:U,preloadedState:Re,middleware:Pe}),Fe=function(t){var e=t.children,n=z((function(t){return t.system.error})),i=Object(a.useState)(!1),s=Object(o.a)(i,2),c=s[0],u=s[1];if(!n.isError||!n.error)return c&&u(!c),r.a.createElement(r.a.Fragment,null,e);var l=n.error;if(l)switch(l.type){case"NoSpotifyAccess":c||u(!0),null;break;default:r.a.createElement("h3",null,"Error"),console.error(l)}return r.a.createElement(r.a.Fragment,null,e)};s.a.render(r.a.createElement(D.a,{store:Ne},r.a.createElement(Fe,null,r.a.createElement(Ee.a,null,r.a.createElement(Se,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[47,1,2]]]);
//# sourceMappingURL=main.e67cc4a1.chunk.js.map