(this["webpackJsonpfestival-poster-app"]=this["webpackJsonpfestival-poster-app"]||[]).push([[0],{48:function(t,e,n){t.exports=n.p+"static/media/city.7878fa91.jpg"},49:function(t,e,n){t.exports=n.p+"static/media/fireworks.c1f1ed0c.jpg"},52:function(t,e,n){t.exports=n(78)},57:function(t,e,n){},58:function(t,e,n){},68:function(t,e,n){},69:function(t,e,n){},78:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(18),c=n.n(i),s=(n(57),n(58),n(7)),o=n(6),u=n.n(o),l=n(25),f=n(22),h=n(14),p=n(19),d=n(16),v=n(20),m=n(51),b=function(t){var e=t instanceof y?t.type:null;return{message:t.message,name:t.name,stack:t.stack,type:e}},y=function(t){function e(t,n){var a;return Object(d.a)(this,e),(a=Object(f.a)(this,Object(h.a)(e).call(this,t)))._type=null,n&&(a._type=n),a}return Object(p.a)(e,t),Object(v.a)(e,[{key:"toJSON",value:function(){return b(this)}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}}]),e}(Object(m.a)(Error)),w="https://api.spotify.com",g="v1",E=function(){function t(e){Object(d.a)(this,t),this.apiKey=e}return Object(v.a)(t,[{key:"getPlaylistArtists",value:function(t){var e;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.awrap(this.getPlaylistTracks(t));case 2:if(!((e=n.sent)instanceof y)){n.next=5;break}return n.abrupt("return",e);case 5:return n.abrupt("return",R(e));case 6:case"end":return n.stop()}}),null,this)}},{key:"noAuthAPICall",value:function(t){var e,n;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.awrap(fetch(t));case 3:return e=a.sent,a.next=6,u.a.awrap(j(e,t));case 6:return n=a.sent,a.abrupt("return",n);case 10:return a.prev=10,a.t0=a.catch(0),a.abrupt("return",a.t0);case 13:case"end":return a.stop()}}),null,null,[[0,10]])}}]),t}(),x=function(t){function e(){return Object(d.a)(this,e),Object(f.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(v.a)(e,[{key:"getPlaylists",value:function(){return t=this.apiKey,u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T(t,["me","playlists"]));case 1:case"end":return e.stop()}}));var t}},{key:"getPlaylistTracks",value:function(t){return function(t,e){var n;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(T(t,["playlists",e,"tracks"]));case 2:if(!((n=a.sent)instanceof y)){a.next=5;break}return a.abrupt("return",n);case 5:return a.abrupt("return",n.map((function(t){return t.track})));case 6:case"end":return a.stop()}}))}(this.apiKey,t)}},{key:"me",value:function(){return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",C(this.apiKey));case 1:case"end":return t.stop()}}),null,this)}},{key:"topArtists",value:function(){var t,e,n,a,r,i,c,s,o=arguments;return u.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e=t.limit,n=void 0===e?"50":e,a=t.offset,r=void 0===a?"0":a,i=t.time_range,c=void 0===i?"medium_term":i,l.next=3,u.a.awrap(T(this.apiKey,["me","top","artists"],{limit:n,offset:r,time_range:c}));case 3:return s=l.sent,l.abrupt("return",s);case 5:case"end":return l.stop()}}),null,this)}}]),e}(E),k=function(t){function e(){return Object(d.a)(this,e),Object(f.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(v.a)(e,[{key:"getPlaylists",value:function(){var t;return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O("users",this.apiKey,"playlists"),e.next=3,u.a.awrap(this.noAuthAPICall(t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),null,this)}},{key:"getPlaylistTracks",value:function(t){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=O("playlists",this.apiKey,"tracks"),t.next=3,u.a.awrap(this.noAuthAPICall(e));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),null,this)}},{key:"me",value:function(){var t;return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O("users",this.apiKey),e.next=3,u.a.awrap(this.noAuthAPICall(t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),null,this)}}]),e}(E);function O(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=[g].concat(e).join("/");return new URL(a,w).href}function j(t,e){var n;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.ok){a.next=4;break}if(401!==t.status){a.next=3;break}return a.abrupt("return",new y("Fetch for URL ".concat(e," returned not ok status.  Status: ").concat(t.status),"NoSpotifyAccess"));case 3:return a.abrupt("return",new y("Fetch for URL ".concat(e," returned not ok status.  Status: ").concat(t.status),"NoSpotifyAccess"));case 4:if(200===t.status){a.next=6;break}return a.abrupt("return",new y("Fetch for URL ".concat(e," returned a status of ").concat(t.status),"NoSpotifyAccess"));case 6:return a.prev=6,a.next=9,u.a.awrap(t.json());case 9:return n=a.sent,a.abrupt("return",n);case 13:return a.prev=13,a.t0=a.catch(6),a.abrupt("return",a.t0);case 16:case"end":return a.stop()}}),null,null,[[6,13]])}function A(t,e){var n,a;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n={Authorization:"Bearer ".concat(t)},r.prev=1,r.next=4,u.a.awrap(fetch(e,{headers:n}));case 4:return a=r.sent,r.abrupt("return",j(a,e));case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",r.t0);case 11:case"end":return r.stop()}}),null,null,[[1,8]])}function S(t){if(!t)return"";var e=new URLSearchParams;for(var n in t)e.append(n,t[n]);return e.toString()}function T(t,e,n){var a,r,i;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=S(n),r=O.apply(void 0,Object(l.a)(e).concat(["?".concat(a)])),c.next=4,u.a.awrap(A(t,r));case 4:if(!((i=c.sent)instanceof y)){c.next=7;break}return c.abrupt("return",i);case 7:if(i.hasOwnProperty("items")){c.next=9;break}throw new y("Returned paging object does not contain items field.  Url: ".concat(r));case 9:return c.abrupt("return",i.items);case 10:case"end":return c.stop()}}))}function C(t){var e,n;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=O("me"),a.next=3,u.a.awrap(A(t,e));case 3:return n=a.sent,a.abrupt("return",n);case 5:case"end":return a.stop()}}))}function R(t){var e=new Set;return t.forEach((function(t){e.add(t.artists[0].name)})),Object(l.a)(e)}var N=n(9),_=n(12),I=n(24),P=n(17),U=Object(I.b)({name:"system",initialState:{spotifyAccessToken:"",spotifyAccessTokenExpire:"",error:{isError:!1}},reducers:{accessTokenUpdated:function(t,e){return Object(P.a)(t,(function(t){t.spotifyAccessToken=e.payload.spotifyAccessToken,t.spotifyAccessTokenExpire=e.payload.spotifyAccessTokenExpire,""!==e.payload.spotifyAccessToken&&t.error.isError&&"NoSpotifyAccess"===t.error.error.type&&(t.error={isError:!1})}))},caughtGlobalError:function(t,e){return Object(P.a)(t,(function(t){t.error={isError:!0,error:b(e.payload)}}))},clearGlobalError:function(t){return Object(P.a)(t,(function(t){t.error={isError:!1}}))}}}),F=U.actions,L=F.accessTokenUpdated,B=F.caughtGlobalError,D=(F.clearGlobalError,U.reducer),z=.8*window.innerHeight,H={artists:[],themeType:"theme1",topArtistsTimeRange:"medium_term",width:.65*z,height:z},M=Object(I.b)({name:"poster",initialState:H,reducers:{changeThemeType:function(t,e){return Object(P.a)(t,(function(t){t.themeType=e.payload}))},updateArtistList:function(t,e){return Object(P.a)(t,(function(t){t.artists=e.payload}))},topArtistsTimeRangeUpdated:function(t,e){return Object(P.a)(t,(function(t){t.topArtistsTimeRange=e.payload}))}}}),G=M.actions,K=G.changeThemeType,X=G.updateArtistList,J=G.topArtistsTimeRangeUpdated,Z=M.reducer,W=Object(_.combineReducers)({poster:Z,system:D}),Y=function(t){return Object(N.c)(t)},V=function(){var t=Y((function(t){return t.system.spotifyAccessToken})),e=Y((function(t){return t.system.spotifyAccessToken}));if(""===t&&""===e)return{status:"NONE"};if(""===t||""===e)throw new Error("Spotify access token/expire in invalid state");return parseInt(e,10)<Math.floor(Date.now()/1e3)?{status:"EXPIRED"}:{status:"VALID",accessToken:t}},$=n(33),q=n(32),Q=n(80),tt=n(81),et=n(82),nt=n(92),at=n(83),rt=n(79),it=function(t){var e=t.children,n=Object(q.a)(t,["children"]),a=n.color?n.color:"primary",i=n.size?n.size:"sm";return r.a.createElement(rt.a,Object.assign({color:a,size:i,onClick:function(t){var e;t.stopPropagation(),null===(e=n.onClick)||void 0===e||e.call(n,t)}},n),e)};n(68);function ct(t,e,n){t.preventDefault(),n(e)}var st=function(t){var e=t.rowNumber,n=t.disableActions,i=t.item,c=t.isEditing,o=t.setIsEditing,u=Object(q.a)(t,["rowNumber","disableActions","item","isEditing","setIsEditing"]),l=Object(a.useState)(i.text),f=Object(s.a)(l,2),h=f[0],p=f[1],d=u.handleRemove,v=u.handleEdit,m=u.handleSelectionChange,b=u.canEditGlobal&&i.canEdit&&v,y=!(!u.canRemove||!d),w=!(!u.canSelect||void 0===m),g=!!i.isSelected;return c?r.a.createElement(Q.a,null,r.a.createElement(tt.a,null,r.a.createElement(et.a,{value:h,style:{display:"inline"},onChange:function(t){p(t.target.value)}}),r.a.createElement(nt.a,{addonType:"append"},r.a.createElement(it,{onClick:function(t){ct(t,ft(i,{text:h}),v),p(""),o(!1)}},"Save")),r.a.createElement(nt.a,{addonType:"append"},r.a.createElement(it,{color:"danger",onClick:function(t){p(""),o(!1)}},"X")))):function(){var t=w&&g;return r.a.createElement(Q.a,{key:i.text,action:w,active:t,className:"noselect d-flex justify-content-between align-items-center py-1",onClick:function(t){var e;return null===(e=u.handleSelectionChange)||void 0===e?void 0:e.call(u,i)}},"".concat(e+1,". "),i.text,r.a.createElement(at.a,null,b&&v&&r.a.createElement(it,{disabled:n,onClick:function(t){return o(!0)}},"Edit"),y&&d&&r.a.createElement(it,{disabled:n,onClick:function(t){ct(t,i,d)}},"Remove")),t?"\u2705":"\u274c")}()},ot=n(84),ut=-1,lt=function(){return++ut};function ft(t,e){return Object($.a)({id:lt()},t,{},e)}function ht(t,e,n){return{handleRemove:function(n){var a;t((function(t){return t.filter((function(t){return t.id!==n.id}))})),null===e||void 0===e||null===(a=e.handleRemove)||void 0===a||a.call(e,n)},handleAddRow:function(a){var r,i,c=(null===n||void 0===n?void 0:null===(r=n.addRow)||void 0===r?void 0:r.call(n,a))||a;t((function(t){return[].concat(Object(l.a)(t),[c])})),null===e||void 0===e||null===(i=e.handleAddRow)||void 0===i||i.call(e,c)},handleEdit:function(n){var a;t((function(t){var e=Object(l.a)(t),a=e.find((function(t){return t.id===n.id}));if(!a)throw new Error("Could not find edited item: ".concat(JSON.stringify(n)));return a.text=n.text,e})),null===e||void 0===e||null===(a=e.handleEdit)||void 0===a||a.call(e,n)},handleSelectionChange:function(n){t((function(t){return Object(P.a)(t,(function(t){var a,r=t.findIndex((function(t){return t.id===n.id}));t[r].isSelected=!n.isSelected,null===e||void 0===e||null===(a=e.handleSelectionChange)||void 0===a||a.call(e,t[r])}))}))},handleSelectAll:function(){t((function(t){var e=t.map((function(t){return Object($.a)({},t,{isSelected:!0})})),a=null===n||void 0===n?void 0:n.selectAll;return a&&(e=a(e)),e}))},handleClear:function(){t((function(t){var e=t.map((function(t){return Object($.a)({},t,{isSelected:!1})})),a=null===n||void 0===n?void 0:n.clear;return a&&(e=a(e)),e}))}}}var pt=function(t){var e=Object(a.useState)(!1),n=Object(s.a)(e,2),i=n[0],c=n[1],o=Object(a.useState)(""),u=Object(s.a)(o,2),l=u[0],f=u[1],h=Object(a.useState)(!1),p=Object(s.a)(h,2),d=p[0],v=p[1],m=t.items,b=t.canSelect&&t.handleSelectAll,y=t.canSelect&&t.handleClear,w=function(){var e=t.handleAddRow,n=t.canAddRow;return e&&n?i?r.a.createElement("div",null,r.a.createElement(Q.a,null,r.a.createElement(tt.a,null,r.a.createElement(et.a,{value:l,onChange:function(t){return f(t.target.value)}}),r.a.createElement(at.a,null,r.a.createElement(it,{onClick:function(){var t=ft({text:l,userAdded:!0,isSelected:!1},{});c(!1),e(t),f("")}},"Save"),r.a.createElement(it,{color:"danger",onClick:function(){c(!1),f("")}},"X"))))):r.a.createElement(Q.a,null,r.a.createElement(it,{block:!0,disabled:d,onClick:function(){return c(!0)}},"Add Row")):null},g=function(){return r.a.createElement("div",{className:"list__header",style:{display:"flex",justifyContent:"space-between"}},t.name?r.a.createElement("h3",null,t.name):null,function(){var e=null,n=null;return b&&(e=r.a.createElement(it,{color:"success",onClick:function(e){var n;null===(n=t.handleSelectAll)||void 0===n||n.call(t)}},"Select All")),y&&(n=r.a.createElement(it,{color:"warning",onClick:function(e){var n;null===(n=t.handleClear)||void 0===n||n.call(t)}},"Unselect All")),r.a.createElement("div",{className:"list__actions"},r.a.createElement(at.a,null,e,n))}())};return r.a.createElement("div",{className:"list"},function(){var e=m.map((function(e,n){return r.a.createElement(st,Object.assign({key:e.id,item:e,setIsEditing:v,isEditing:d,disableActions:i,rowNumber:n},t))}));return r.a.createElement("div",{className:"list"},g(),r.a.createElement(ot.a,null,e,w()))}())},dt=function(){var t=Object(N.b)();return Object(a.useCallback)((function(e,n){n&&(e.type=n),t(B(e))}),[t])},vt=function(){var t=V(),e=dt(),n="";"NONE"===t.status||"EXPIRED"===t.status?e(new y("Spotify Access token status not valid.  status: ".concat(t.status)),"NoSpotifyAccess"):n=t.accessToken;return Object(a.useMemo)((function(){return""===n?null:function(t){var e=t.authToken,n=t.userId;return e&&""!==e?new x(e):n&&""!==n?new k(n):null}({authToken:n})}),[n])},mt=0,bt=function(){var t=Y((function(t){return t.poster.topArtistsTimeRange})),e=Y((function(t){return t.poster.artists})),n=vt(),r=Object(N.b)(),i=Object(a.useCallback)((function(t){console.log(t)}),[]),c=dt();return Object(a.useEffect)((function(){n&&function(){var e,a;u.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(null===n||void 0===n?void 0:n.topArtists){s.next=2;break}throw new Error("Expected topArtists method to exist on spotify api object");case 2:if(!(++mt>5)){s.next=5;break}throw new Error("Max Count Reached");case 5:return i("Using api to retreive top Artists for range "+t),s.prev=6,s.next=9,u.a.awrap(n.topArtists({time_range:t}));case 9:e=s.sent,s.next=15;break;case 12:s.prev=12,s.t0=s.catch(6),c(s.t0,"NoSpotifyAccess");case 15:if(s.prev=15,e){s.next=18;break}throw new y("Expected top artists data");case 18:if(!(e instanceof Error)){s.next=21;break}return c(e),s.abrupt("return");case 21:return a=e.map((function(t){return ft({isSelected:!0,text:t.name,canEdit:!1,userAdded:!1})})),r(X(a)),s.finish(15);case 24:case"end":return s.stop()}}),null,null,[[6,12,15,24]])}()}),[r,i,c,n,t]),{topArtists:e,setTopArtistsTimeRange:function(t){r(J(t))}}},yt=function(t,e,n){var r=Object(a.useState)(e),i=Object(s.a)(r,2),c=i[0],o=i[1];return[c,{options:t,selected:c,handleChange:function(t){o(t),n&&n(t)}}]},wt=function(t){var e=t.options,n=t.handleChange,a=t.selected,i=e.map((function(t){return r.a.createElement("option",{key:t.value,value:t.value},t.text)}));return r.a.createElement("select",{value:a,onChange:function(t){n&&n(t.target.value)}},i)},gt=n(48),Et=n.n(gt),xt=n(49),kt=n.n(xt),Ot=function(t,e,n){var a=t.getContext("2d");if(!a)throw new Error("Could not get canvas context to create HiDPI canvas");var r=function(t){return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}(a);return t.width=e*r,t.height=n*r,t.style.width=e+"px",t.style.height=n+"px",a.setTransform(r,0,0,r,0,0),t},jt=function(){function t(e){Object(d.a)(this,t),this.ps=e,this.ctx=void 0,this.w=900,this.h=600,this.bgImage="",this.festivalNameText="My Festival",this.festivalNameColor="white",this.festivalNameFont="serif",this.festivalNameFontRatio=.1,this.festivalNameCase="upper",this.artistSeperator="/",this.artistFont="serif",this.artistColor="white",this.artistFontRatio=.025,this.artistTopRatio=.5,this.artistCase="upper"}return Object(v.a)(t,[{key:"getContext",value:function(t){var e=t.getContext("2d");if(!e)throw new y("Expected canvas context");return e}},{key:"setPosterSize",value:function(t,e){this.w=t,this.h=e}},{key:"drawBGImage",value:function(t){var e=Math.max(this.w/t.width,this.h/t.height),n=this.w/2-t.width/2*e,a=this.h/2-t.height/2*e;this.ctx.drawImage(t,n,a,t.width*e,t.height*e)}},{key:"font",value:function(t,e){return"".concat(this.fontHeight(t),"px ").concat(e)}},{key:"fontHeight",value:function(t){return Math.floor(t*this.h)}},{key:"cutTrailingChar",value:function(t){return t.slice(0,t.length-1)}},{key:"artistLines",value:function(){var t=[],e="",n=!0,a=!1,r=void 0;try{for(var i,c=this.artists[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value.text;"upper"===this.artistCase&&(s=s.toUpperCase()),Math.ceil(this.ctx.measureText(e+s).width)>this.w?(t.push(this.cutTrailingChar(e)),e=s+this.artistSeperator):e=e+s+this.artistSeperator}}catch(o){a=!0,r=o}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}return""!==e&&t.push(this.cutTrailingChar(e)),t}},{key:"drawFestivalName",value:function(){var t=this.w/2;this.ctx.font=this.font(this.festivalNameFontRatio,this.festivalNameFont),this.ctx.fillStyle=this.festivalNameColor,this.ctx.textBaseline="top",this.ctx.textAlign="center",this.ctx.strokeStyle="black",this.ctx.lineWidth=2,this.ctx.fillText(this.festivalName,t,30),this.ctx.strokeText(this.festivalName,t,30)}},{key:"drawArtistBlock",value:function(){var t=this,e=this.h*this.artistTopRatio;this.ctx.font=this.font(this.artistFontRatio,this.artistFont);var n=this.artistLines();this.ctx.textBaseline="top",this.ctx.textAlign="center",this.ctx.fillStyle=this.artistColor;var a=this.fontHeight(this.artistFontRatio);n.forEach((function(n,r){var i=e+(r+1)*a;t.ctx.fillText(n,t.midX,i,t.w)}))}},{key:"draw",value:function(t){var e=this;this.ctx=this.getContext(t),t.width=this.w,t.height=this.h,Ot(t,this.w,this.h);var n=new Image(this.w,this.h);n.onload=function(){e.drawBGImage(n),e.drawFestivalName(),e.drawArtistBlock()},n.src=this.bgImage}},{key:"midX",get:function(){return Math.floor(this.w/2)}},{key:"midY",get:function(){return Math.floor(this.h/2)}},{key:"festivalName",get:function(){return"upper"===this.festivalNameCase?this.festivalNameText.toUpperCase():this.festivalNameText}},{key:"artists",get:function(){return this.ps.artists.filter((function(t){return t.isSelected}))}}]),t}(),At=function(t){function e(){var t,n;Object(d.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(r)))).bgImage=kt.a,n.festivalNameFont="Impact",n.festivalNameColor="tomato",n.artistColor="lightblue",n.artistSeperator=String.fromCharCode(8226),n.artistTopRatio=.4,n}return Object(p.a)(e,t),e}(jt),St=function(t){function e(){var t,n;Object(d.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(r)))).bgImage=Et.a,n.festivalNameColor="lime",n.festivalNameFont="Avant Garde",n.artistColor="lime",n.artistFontRatio=.02,n.artistTopRatio=.7,n}return Object(p.a)(e,t),e}(jt);var Tt,Ct=function(){var t=function(){var t=Object(a.useState)([0,0]),e=Object(s.a)(t,2),n=e[0],r=e[1];return Object(a.useLayoutEffect)((function(){function t(){r([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}}),[]),n}(),e=Object(s.a)(t,2)[1],n=Math.floor(.8*e);return[Math.floor(.7*n),n]},Rt=[{text:"Last 6 Months",value:"medium_term"},{text:"All Time",value:"long_term"},{text:"1 Month",value:"short_term"}],Nt=function(){var t=Ct(),e=Object(s.a)(t,2)[1],n=bt().setTopArtistsTimeRange,i=Y((function(t){return t.poster.topArtistsTimeRange})),c=yt(Rt,i,(function(t){return n(t)})),o=Object(s.a)(c,2)[1],u=function(t,e){var n=Object(N.c)(t),r=Object(N.b)(),i=Object(a.useCallback)((function(t){r(e(t))}),[r,e]),c=ht((function(t){var a=t(n);r(e(a))}));return{items:n,setItems:i,listProps:c}}((function(t){return t.poster.artists}),X),l=u.items,f=u.listProps;return r.a.createElement("div",null,r.a.createElement("h3",{style:{display:"inline-block"}},"Top Artists"),r.a.createElement(wt,o),r.a.createElement("div",{style:{maxHeight:e,overflowY:"scroll"}},r.a.createElement(pt,Object.assign({items:l},f,{canSelect:!0}))))},_t=n(85),It=n(86),Pt=n(87),Ut=n(88),Ft=(n(69),function(t){t.themeType;var e=function(){var t,e=Ct(),n=Object(s.a)(e,2),a=n[0],r=n[1],i=Y((function(t){return t.poster}));switch(i.themeType){case"theme1":t=new At(i);break;case"theme2":t=new St(i);break;default:throw new y("Invalid theme ".concat(i.themeType))}return t.setPosterSize(a,r),t}(),n=Object(a.useRef)(null);Object(a.useEffect)((function(){var t=n.current;if(!t)throw new Error("Unable to retreive poster canvas element");e.draw(t)}));return r.a.createElement("canvas",{ref:n,id:"poster",style:{border:"3px solid"}},"Festival Poster Viewer")}),Lt=[{text:"Theme 1",value:"theme1"},{text:"Theme 2",value:"theme2"}],Bt=function(){return null},Dt=function(){var t=Object(N.b)(),e=Y((function(t){return t.poster.themeType})),n=yt(Lt,e,(function(e){t(K(e))})),a=Object(s.a)(n,2)[1];return r.a.createElement("div",{className:"home"},r.a.createElement(_t.a,{className:"navbar navbar-expand-sm navbar-light bg-light py-0",style:{marginBottom:"10px"}},r.a.createElement("div",{className:"navbar-brand"},"Poster App"),Bt()),r.a.createElement(It.a,null,r.a.createElement(Pt.a,null,r.a.createElement(Ut.a,null,r.a.createElement(wt,a),r.a.createElement(it,{color:"warning",onClick:function(){return function(){var t,e,n;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=document.getElementById("poster")){a.next=3;break}throw new Error("Expected canvas node");case 3:e=t.toDataURL("image/jpeg",1),null===(n=window.open("_blank"))||void 0===n||n.document.write('<img src="'.concat(e,'"></img>'));case 6:case"end":return a.stop()}}))}()}},"Create Image"),r.a.createElement(Ft,{themeType:e})),r.a.createElement(Ut.a,null,r.a.createElement(Nt,null)))))},zt=n(21),Ht="https://accounts.spotify.com/authorize",Mt="access_token",Gt="token_type",Kt="expires_in",Xt={client_id:"f775b626d4784dfba4491742d5453d55",response_type:"token",redirect_uri:"http://localhost:3000",scope:"user-top-read"};function Jt(){for(var t=[],e=0,n=Object.entries(Xt);e<n.length;e++){var a=n[e],r=Object(s.a)(a,2),i=r[0],c=r[1];t.push("".concat(i,"=").concat(c))}var o=t.join("&");return"".concat(Ht,"?").concat(o)}function Zt(){if(Tt)return{status:"AUTHORIZED",data:Tt};var t={},e=window.location.href.split("#");if(2!==e.length)return{status:"NOT_AUTHORIZED"};var n=e[1].split("&"),a=!0,r=!1,i=void 0;try{for(var c,o=n[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var u=c.value.split("="),l=Object(s.a)(u,2),f=l[0],h=l[1];t[f]=h}}catch(d){r=!0,i=d}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}if(t.hasOwnProperty("error"))return{status:"ACCESS_DENIED"};var p="";return t.hasOwnProperty(Mt)||(p="Hash fragment does not contain field: ".concat(Mt)),t.hasOwnProperty(Kt)||(p="Hash fragment does not contain field: ".concat(Kt)),t.hasOwnProperty(Gt)||(p="Hash fragment does not contain field: ".concat(Gt)),""!==p?{status:"ERROR",error:p}:{status:"AUTHORIZED",data:t}}var Wt=function(){return r.a.createElement(zt.a,{to:"/"})},Yt=function(){var t=Object(N.b)(),e=Zt();if("AUTHORIZED"!==e.status)return console.log("Non Authorized status: ".concat(e.status)),console.log(e.error),Wt();if(!e.data)throw new Error("Received authorized status without data");var n=e.data,a=n.access_token,r=n.expires_in;return t(L({spotifyAccessToken:a,spotifyAccessTokenExpire:r})),Wt()},Vt=function(){var t=Object(N.b)(),e=Zt();if("AUTHORIZED"!==e.status);else{if(!e.data)throw new Error("Received authorized status without data");var n=e.data,a=n.access_token,i=n.expires_in;window.location.hash="",t(L({spotifyAccessToken:a,spotifyAccessTokenExpire:i}))}return r.a.createElement("div",{className:"App"},r.a.createElement(zt.d,null,r.a.createElement(zt.b,{exact:!0,path:"/authenticate"},r.a.createElement(Yt,null)),r.a.createElement(zt.b,{exact:!0,path:"/"},r.a.createElement(Dt,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $t=window.localStorage.getItem("__REDUX_LOCAL_STORAGE_KEY"),qt=$t?JSON.parse($t):void 0,Qt=[function(t){return function(e){return function(n){var a=e(n),r=t.getState(),i=JSON.stringify(r);return window.localStorage.setItem("__REDUX_LOCAL_STORAGE_KEY",i),a}}}],te=Object(I.a)({reducer:W,preloadedState:qt,middleware:Qt}),ee=n(91),ne=n(89),ae=n(90),re=function(t){var e=t.toggle;return r.a.createElement(ee.a,Object.assign({},t,{className:"spotify-auth-refresh-modal"}),r.a.createElement(ne.a,{toggle:e},"Spotify Is Asking To Be Authorized"),r.a.createElement(ae.a,null,r.a.createElement("a",{href:Jt()},"Authorize Spotify")))},ie=function(t){var e=t.children,n=Y((function(t){return t.system.error})),i=Object(a.useState)(!1),c=Object(s.a)(i,2),o=c[0],u=c[1];if(!n.isError)return o&&u(!1),r.a.createElement(r.a.Fragment,null,e);var l;n.error;switch(f.type){case"NoSpotifyAccess":o||u(!0),l=null;break;default:var f=n.error;l=r.a.createElement("h3",null,"Error"),console.error(f)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{isOpen:o,toggle:function(){return u(!o)}}),l,e)},ce=n(30);c.a.render(r.a.createElement(N.a,{store:te},r.a.createElement(ie,null,r.a.createElement(ce.a,null,r.a.createElement(Vt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[52,1,2]]]);
//# sourceMappingURL=main.dab55108.chunk.js.map